{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///../blocks/fpbk/modal/src/frontend/modal-block.js","webpack:///external \"jQuery\""],"names":["handleExitIntention","modal","bsModal","document","addEventListener","e","shouldShowExitIntent","toElement","relatedTarget","clientY","readCookie","$","on","createCookieIfMissing","window","messageEvent","data","success","initModal","shownBefore","id","openOnce","matches","showWhenCookiesAccepted","cookiesAccepted","pardotForm","querySelector","delay","parseInt","dataset","userAction","modalVisibility","visibility","conditions","getSiteCountryCode","showModal","some","item","setTimeout","classList","contains","stagesContainer","stages","querySelectorAll","nextButtons","currentStage","setModalStage","stageNumber","nextStage","currentHeight","Math","ceil","getBoundingClientRect","height","style","Array","from","forEach","stage","remove","add","nextStageHeight","scrollHeight","animate","duration","fill","nextButton","isSameSource","source","contentWindow","hasCurrentStageForm","frameHeight","modalActiveStage","iframeHeight","formSubmitted","formStage","initBlock"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;ACvJA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,mBAAmB,GAAG,CAAEC,KAAF,EAASC,OAAT,KAAsB;AACjD;AACAC,UAAQ,CAACC,gBAAT,CAA2B,UAA3B,EAAyCC,CAAF,IAAS;AAC/C,UAAMC,oBAAoB,GAAG,CAAED,CAAC,CAACE,SAAJ,IAAiB,C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","file":"scripts/blocks-fpbk-modal-modal-block.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"blocks-fpbk-modal-modal-block\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/wp-content/themes/freshpress/dist/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([232,\"common-helpers\",\"common-modules\",\"vendor-core-js\",\"vendor-dashify\",\"vendor-magnum-ui\",\"vendor-smoothscroll-polyfill\",\"vendor-js-cookie\",\"common-json\",\"vendor-bootstrap\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Modal.\n */\nimport { initBlock } from 'scripts/helpers/_blocks';\nimport { readCookie, createCookieIfMissing } from 'scripts/modules/_cookies';\nimport { getSiteCountryCode } from 'scripts/modules/_i18n';\nimport 'bootstrap/js/dist/modal';\n\nconst handleExitIntention = ( modal, bsModal ) => {\n\t// eslint-disable-next-line @wordpress/no-global-event-listener\n\tdocument.addEventListener( 'mouseout', ( e ) => {\n\t\tconst shouldShowExitIntent = ! e.toElement && ! e.relatedTarget && e.clientY < 10;\n\n\t\tif ( shouldShowExitIntent && ! readCookie( 'seo-exit-popup-dismissed' ) ) {\n\t\t\tbsModal.modal( 'show' );\n\n\t\t\t// This event handler cannot use addEventListener and must use jQuery due to bootstrap's internal code.\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\t$( modal ).on( 'hidden.bs.modal', () => {\n\t\t\t\tcreateCookieIfMissing( 'seo-exit-popup-dismissed', 'true', 30 );\n\t\t\t} );\n\t\t\t// eslint-disable-next-line @wordpress/no-global-event-listener\n\t\t\twindow.addEventListener( 'message', ( messageEvent ) => {\n\t\t\t\tif ( messageEvent.data.success ) {\n\t\t\t\t\tcreateCookieIfMissing( 'seo-exit-popup-dismissed', 'true', 30 );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n};\n\nconst initModal = ( modal ) => {\n\tconst shownBefore = readCookie( `modal-id-${ modal.id }-dismissed` );\n\tconst openOnce = modal.matches( '[data-open-once=\"1\"]' );\n\tconst showWhenCookiesAccepted = modal.matches( '[data-show-when-cookies-accepted=\"1\"]' );\n\tconst cookiesAccepted = readCookie( `cookies-declined` ) === 'false';\n\tconst pardotForm = modal.querySelector( 'iframe' );\n\n\tif ( modal && modal.matches( '[data-auto-show=\"1\"]' ) ) {\n\t\t// eslint-disable-next-line no-undef\n\t\tconst bsModal = $( modal );\n\t\tconst delay = parseInt( modal.dataset.delay, 10 ) * 1000;\n\t\tconst userAction = modal.dataset.userAction;\n\t\tconst modalVisibility = modal.dataset.visibility;\n\t\tconst conditions = [\n\t\t\tmodalVisibility === 'everyone',\n\t\t\tmodalVisibility === 'nfb_customers' && readCookie( 'smux_login' ),\n\t\t\tmodalVisibility === 'not_nfb_customers' && ! readCookie( 'smux_login' ),\n\t\t\tmodalVisibility === 'location' &&\n\t\t\t\treadCookie( 'country-code' ) === 'GB' &&\n\t\t\t\tgetSiteCountryCode() === 'US',\n\t\t];\n\t\tconst showModal = conditions.some( ( item ) => item );\n\t\tif (\n\t\t\t( ! openOnce || ( openOnce && ! shownBefore ) ) &&\n\t\t\t( ! showWhenCookiesAccepted || ( showWhenCookiesAccepted && cookiesAccepted ) )\n\t\t) {\n\t\t\tif ( showModal && userAction === 'none' ) {\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tbsModal.modal( 'show' );\n\t\t\t\t\tif ( openOnce ) {\n\t\t\t\t\t\tcreateCookieIfMissing( `modal-id-${ modal.id }-dismissed`, 'true', 30 );\n\t\t\t\t\t}\n\t\t\t\t}, delay );\n\t\t\t} else if (\n\t\t\t\tshowModal &&\n\t\t\t\tuserAction === 'page_leave' &&\n\t\t\t\t! readCookie( 'seo-exit-popup-dismissed' )\n\t\t\t) {\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\thandleExitIntention( modal, bsModal );\n\t\t\t\t\tif ( openOnce ) {\n\t\t\t\t\t\tcreateCookieIfMissing( `modal-id-${ modal.id }-dismissed`, 'true', 30 );\n\t\t\t\t\t}\n\t\t\t\t}, delay );\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( modal.classList.contains( 'is-style-with-stages' ) ) {\n\t\tconst stagesContainer = modal.querySelector( '.modal__stages' );\n\t\tconst stages = modal.querySelectorAll( '.modal__stage' );\n\t\tconst nextButtons = modal.querySelectorAll( 'a[data-stage=\"next\"]' );\n\t\tmodal.currentStage = 0;\n\n\t\tconst setModalStage = ( stageNumber ) => {\n\t\t\tconst nextStage = stages[ modal.currentStage + 1 ];\n\n\t\t\tmodal.currentHeight = Math.ceil( stagesContainer.getBoundingClientRect().height );\n\t\t\tstagesContainer.style.height = `${ modal.currentHeight }px`;\n\t\t\tArray.from( stages ).forEach( ( stage ) => stage.classList.remove( 'active' ) );\n\t\t\tnextStage.classList.add( 'active' );\n\t\t\tsetTimeout( () => {\n\t\t\t\tconst nextStageHeight = nextStage.scrollHeight; // eslint-disable-line\n\t\t\t\tstagesContainer.animate(\n\t\t\t\t\t[\n\t\t\t\t\t\t{ height: `${ modal.currentHeight }px` },\n\t\t\t\t\t\t{ height: `${ nextStageHeight }px` },\n\t\t\t\t\t],\n\t\t\t\t\t{\n\t\t\t\t\t\tduration: 200,\n\t\t\t\t\t\tfill: 'forwards',\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tmodal.currentHeight = nextStageHeight;\n\t\t\t}, 100 );\n\n\t\t\tmodal.currentStage = stageNumber;\n\t\t};\n\n\t\tif ( nextButtons ) {\n\t\t\tnextButtons.forEach( ( nextButton ) => {\n\t\t\t\tnextButton.addEventListener( 'click', () => {\n\t\t\t\t\tsetModalStage( modal.currentStage + 1 );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\t// eslint-disable-next-line @wordpress/no-global-event-listener\n\t\twindow.addEventListener( 'message', ( messageEvent ) => {\n\t\t\tconst isSameSource = messageEvent.source === pardotForm.contentWindow;\n\t\t\tconst hasCurrentStageForm = stages[ modal.currentStage ].querySelector( 'iframe' );\n\n\t\t\tif ( messageEvent.data && messageEvent.data.frameHeight && hasCurrentStageForm ) {\n\t\t\t\tconst modalActiveStage = modal.querySelector( '.modal__stage.active' );\n\t\t\t\tmodal.iframeHeight = messageEvent.data.frameHeight;\n\t\t\t\tstagesContainer.animate(\n\t\t\t\t\t[\n\t\t\t\t\t\t{ height: `${ modal.currentHeight }px` },\n\t\t\t\t\t\t{ height: `${ modalActiveStage.scrollHeight }px` },\n\t\t\t\t\t],\n\t\t\t\t\t{\n\t\t\t\t\t\tduration: 200,\n\t\t\t\t\t\tfill: 'forwards',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t( messageEvent.data.formSubmitted || 2 === messageEvent.data.formStage ) &&\n\t\t\t\tisSameSource &&\n\t\t\t\thasCurrentStageForm\n\t\t\t) {\n\t\t\t\tsetModalStage( modal.currentStage + 1 );\n\t\t\t}\n\t\t} );\n\t}\n};\n\ninitBlock( '.modal', initModal );\n","module.exports = jQuery;"],"sourceRoot":""}